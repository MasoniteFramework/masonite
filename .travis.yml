language: python
python:
- '3.4'
- '3.5'
- '3.6'
install:
- pip install .
- pip install -r requirements.txt
before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build
script: python -m pytest
after_script:
  - ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT
env:
  global:
    - GIT_COMMITTED_AT=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then git log -1 --pretty=format:%ct; else git log -1 --skip 1 --pretty=format:%ct; fi)
    - CC_TEST_REPORTER_ID=C0gGrCK7UAH5KGDKZA5Yl9bwyIpIA5NGlJqDjc38F1+S1IRUb6NPcNigrmWiUl+bjlguYacETdN4ZXdZGhcl8/QVpX8saUUSmOen+3h5Ehx4Y2ip2vU1mPNwFUIZotCatAt4y1yeWIxUQJAxbk1s8I8pvUOB1sDAKaJDDNNdQuPJiI3VsnFa3cFeryE+CFZCSKSpLt/KsKdymFYKG+CTYLQLz9uHFtsUu4eF3XZQzyPYHG8LQacvP4jtFgsYbspDiewmx9uK2yDvJQ4K4/MJ3kTni3ziVLSJLuNrE8zNcqab0ce6z/bDSylTKqISqkouSd3WOt2fQplzSIZYxwyEzf6dz/+fD4UGoN1iMMQhE50fHZPfVgHmHJqKCd3EfoGzqpUqoLCrFf6C1aEQS0FmDUTaw2RbFFq5gwmuNBOAeRezf76dSPKsNo0PI1doahh+s0SSXkupdpcWfCqaJDzUD6Zc3oBLLISjEr6uQOzF5Ht1BOunvyRNlV63xNlklBHCXxbRjR4RgfeGbF/mz0ZBunK5F4PVMeT9U0aPOsQcPDdCJOEAxQxvXb+h1lRlAYD0JRaKAW6B4r4m9pKSNEPAFPKseBMQWH31ygZSY1HeuLu6GqYPFRXbybfVQ7CIr7u1dt0+snEQw1meXN7taJEeD/v7rtFoOGN7nO9ESQA+XDQ=
deploy:
  provider: pypi
  user: josephmancuso
  password:
    secure: McIrYxinFbhhTQMmWt+IW6nGstz41+j87iUJ4ovVqxpAirsm7gZ75AoUJ1UAoa/y9uWxvR0ZzBjuhnt04mxPr3XZ4X8qCm/boWtHE3WDt4Kd/Xw4hVJ8rMUBTGqWJ1s1MRRXHkUYsACDEqJvJ2mAvp9yLGeXDWlgfQa/7Fd6zQV1V9FaxeyjkLw4efOXXL30pUyaRrJMLzeHhNp2/Kv+4VYGh+7TnbQOJlCV2HNuDdTmetIfT7VJDhw1mpY2Shdo4cIWkJ6ANxG1CIQh/Bm2mKjSRliKviydfizzgJw9EDR0kvogYUZYeFt9DWAJmdcEP+PamkEMW9L6q6O1268BcoID3/Bu02SoMvn1wWZgWL+HoTB1Jr+fc6nAveFRSCio2tRVUaQ+tylwX6la8198JZBBZc+1AYLZQpcaMy2W03y6oYtOb1KZv0IPG49Dxfk/+OnPGb7TEPiummRN1vKSB+wURKDHVhZhGuons/vW3/PrKsDtbyw/I4AVXt+rKZFt30qies0vjvPR55z0g2t/sV+Pei6cBTstBYgcjNqpFIjIOXjJgmm7asfUC5E36+hVb5BxLAvMbBU4s77qpmG6h0XKueoWhmI3gUltDyPNZXFrDVyU/KYRjocWa7bVAr3vryuMc9IModDNvwFq/nnkaYLD3jvxu7DdMjhi90KWit8=
  on:
    tags: true
    python: 3.6

